{%extends "navbar_templates/base.html"%}

{% block title %}
chat-bot
{% endblock title %}

{% block style %}

<link rel="stylesheet" href="{{ url_for('static', filename='chat.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='nav.css') }}">

{% endblock style %}

{% block content %}

<div class="main-container">
    <div class="sidebar">
        <form action="/task" method="POST" id="actionForm">
            <button type="submit" onclick="return selectAction('Paraphraser')"><span>ğŸ”„</span> Paraphraser</button>
            <button type="submit" onclick="return selectAction('Grammar Checker')"><span>âœï¸</span> Grammar
                Checker</button>
            <button type="submit" onclick="return selectAction('AI Detector')"><span>ğŸ¤–</span> AI Detector</button>
            <button type="submit" onclick="return selectAction('Plagiarism Checker')"><span>ğŸ“‘</span> Plagiarism
                Checker</button>
            <button type="submit" onclick="return selectAction('Summarizer')"><span>ğŸ“</span> Summarizer</button>
            <button type="submit" onclick="return selectAction('Short Answer')"><span>ğŸ”„</span> Short Answer</button>

            <button type="submit" id="clearButton" onclick="return selectAction('Just Chat')">ğŸ’¬ Just Chat</button>

            <input type="hidden" name="action" id="selectedAction">
        </form>
    </div>

    <script>
        // Function to send a message and animate
function sendMessage(userInput) {
    const chatBox = document.querySelector('.chat-box');
    
    // Create user message element
    const userMessage = document.createElement('div');
    userMessage.classList.add('message', 'user-message');
    userMessage.textContent = userInput;
    
    // Append user message to chat box
    chatBox.appendChild(userMessage);
    
    // Simulate bot response
    setTimeout(() => {
        const botMessage = document.createElement('div');
        botMessage.classList.add('message', 'bot-message');
        botMessage.textContent = "Bot: " + simulateBotResponse(userInput); // You can replace this with actual response
        chatBox.appendChild(botMessage);
        chatBox.scrollTop = chatBox.scrollHeight; // Scroll to the bottom
    }, 1000); // Simulated delay for bot response
}

// Simulated bot response function
function simulateBotResponse(input) {
    return "This is a simulated response to: " + input;
}

// Modify form submission to include the sendMessage function
document.querySelector('.input-container form').addEventListener('submit', function(e) {
    e.preventDefault(); // Prevent form from submitting normally
    const userInput = this.user_input.value;
    sendMessage(userInput); // Call sendMessage function
    this.reset(); // Clear the input
});

    </script>


    <div class="chat-container">
        <div class="chat-box">
            <div class="message bot-message">{{ response }}</div>
        </div>

        <div class="watermark">chat-bot</div>

        <div class="input-container">
            <form action="/query" method="POST">
                <input type="text" name="user_input" placeholder= {{task}} required>
                <button type="submit">Send</button>
            </form>
        </div>
    </div>
</div>

{% endblock content %}